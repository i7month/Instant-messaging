{"version":3,"sources":["webpack:///./src/views/lineUp/lineUp.vue?4086","webpack:///./src/views/lineUp/lineUp.vue?d8e8","webpack:///src/views/lineUp/lineUp.vue","webpack:///./src/views/lineUp/lineUp.vue?2787","webpack:///./src/views/lineUp/lineUp.vue","webpack:///./src/assets/image/bg.png"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_lineUp_vue_vue_type_style_index_0_id_799663c7_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_dist_cjs_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_lineUp_vue_vue_type_style_index_0_id_799663c7_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_v","_s","lineUp","on","click","hangUp","attrs","src","alt","staticRenderFns","lineUpvue_type_script_lang_js_","name","data","watch","$store.state.user.message","newVal","newMessage","msgType","channelID","$router","push","query","$route","phone","$store.state.user.uid","mounted","Object","rtm","$md5","toUpperCase","applyForVideoCall","methods","_hangUp","_asyncToGenerator","regenerator_default","a","mark","_callee","res","wrap","_context","prev","next","api","sent","success","abrupt","stop","apply","arguments","_applyForVideoCall","_callee2","_context2","idNumber","serviceCategory","userName","queueNum","toMessage","lineUp_lineUpvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","module","exports","p"],"mappings":"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","file":"js/chunk-3170366c.be068b8b.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./lineUp.vue?vue&type=style&index=0&id=799663c7&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./lineUp.vue?vue&type=style&index=0&id=799663c7&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lineUp\"},[_vm._m(0),_c('div',{staticClass:\"container\"},[_vm._m(1),_vm._m(2),_c('div',{staticClass:\"text\"},[_vm._v(\"正在排队，您前边还有 \"+_vm._s(_vm.lineUp || 0)+\" 人\")])]),_c('div',{staticClass:\"phone\",on:{\"click\":_vm.hangUp}},[_c('img',{attrs:{\"src\":require(\"../../assets/image/phone.png\"),\"alt\":\"\"}})])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"layer layer_one\"},[_c('div',{staticClass:\"layer layer_two\"},[_c('div',{staticClass:\"layer layer_three\"})])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('img',{attrs:{\"src\":require(\"../../assets/image/title.png\"),\"alt\":\"\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bg\"},[_c('img',{attrs:{\"src\":require(\"../../assets/image/bg.png\"),\"alt\":\"\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"lineUp\">\n    <!--    背景3个圈实现开始-->\n    <div class=\"layer layer_one\">\n      <div class=\"layer layer_two\">\n        <div class=\"layer layer_three\"></div>\n      </div>\n    </div>\n    <!--    背景3个圈实现结束-->\n    <!--    内容开始-->\n    <div class=\"container\">\n      <div class=\"title\">\n        <img src=\"../../assets/image/title.png\" alt=\"\">\n      </div>\n      <div class=\"bg\">\n        <img src=\"../../assets/image/bg.png\" alt=\"\">\n      </div>\n      <div class=\"text\" >正在排队，您前边还有 {{ lineUp || 0 }} 人</div>\n    </div>\n    <div class=\"phone\" @click=\"hangUp\">\n      <img src=\"../../assets/image/phone.png\" alt=\"\">\n    </div>\n    <!-- 内容结束-->\n  </div>\n</template>\n\n<script>\n\nimport {createInstance, sendMessageToPeer} from '../../utils/agoraRtm/rtm'\nimport API from '@/api/api'\n\nexport default {\n  name: \"lineUp\",\n  data() {\n    return {\n      // 排队人数\n      lineUp: 0,\n    }\n  },\n  watch: {\n    \"$store.state.user.message\"(newVal) {\n      //do something\n      console.log(newVal)\n      console.log('页面获取收到的消息------',newVal)\n      let newMessage = newVal\n      if (newMessage && newMessage.msgType == '2' && newMessage.channelID) {\n        this.$router.push({\n          name: 'call', query: {\n            name: this.$route.query.name,\n            phone: this.$route.query.phone,\n            channelID:newMessage.channelID,\n          }\n        })\n      }else{\n        console.log('有参数不存在--------')\n      }\n    },\n    \"$store.state.user.uid\"(newVal) {\n      //do something\n      console.log('页面获取发送人的id------', newVal)\n    },\n  },\n  mounted() {\n    // 创建声网即时消息\n    createInstance(this.$md5(this.$route.query.phone).toUpperCase());\n    // 队列接口 获取排队序号\n    this.applyForVideoCall()\n    console.log('登陆传过来的name----', this.$route.query.name)\n    console.log('登陆传过来的phone-----', this.$route.query.phone)\n  },\n  methods: {\n    // 纳税人排队阶段挂断视频\n    async hangUp() {\n      const res = await API.hangUp({hangUp: this.$route.query.phone})\n      console.log(res)\n      if (!res.success) return console.log('接口出现错误--------');\n      this.$router.push('/')\n    },\n    // 队列接口 获取排队序号\n    async applyForVideoCall() {\n      const res = await API.applyForVideoCall({\n        idNumber: this.$route.query.phone, // 用户id\n        serviceCategory: 1, // 业务类型\n        userName: this.$route.query.name, // 用户名\n      })\n      if (!res.success) {\n        this.applyForVideoCall();\n        return console.log('排队失败,重新连接-----------')\n      }\n      this.lineUp = res.queueNum\n    },\n    // 发送消息\n    toMessage() {\n      // 发送消息\n      sendMessageToPeer()\n    },\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.lineUp {\n  position: relative;\n  background: #1f1f22;\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n}\n\n.layer {\n  position: absolute;\n  top: 50%;\n  transform: translateX(-50%);\n  transform: translateY(-50%);\n  border-radius: 50%;\n}\n\n.layer_one {\n  width: 330px;\n  height: 330px;\n  background: #242427;\n  left: 5%;\n}\n\n.layer_two {\n  width: 230px;\n  height: 230px;\n  background: #26262a;\n  left: 16%;\n}\n\n.layer_three {\n  width: 130px;\n  height: 130px;\n  background: #2f2f32;\n  left: 22%;\n}\n\n.container {\n  position: relative;\n  z-index: 2;\n  height: 100vh;\n  @include flex(space-around, center)\n  flex-direction: column;\n\n  .title {\n    width: 50%;\n\n    img {\n      width: 100%;\n    }\n  }\n\n  .bg {\n    width: 50%;\n\n    img {\n      width: 100%;\n    }\n  }\n\n  .text {\n    color: white;\n    font-size: 10px;\n    font-family: MicrosoftYaHeiSemibold;\n  }\n}\n\n.phone {\n  position: absolute;\n  z-index: 2;\n  right: 10px;\n  bottom: 10px;\n\n  img {\n    width: 30px;\n    height: 30px;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./lineUp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./lineUp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./lineUp.vue?vue&type=template&id=799663c7&scoped=true&\"\nimport script from \"./lineUp.vue?vue&type=script&lang=js&\"\nexport * from \"./lineUp.vue?vue&type=script&lang=js&\"\nimport style0 from \"./lineUp.vue?vue&type=style&index=0&id=799663c7&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"799663c7\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/bg.527d2a42.png\";"],"sourceRoot":""}